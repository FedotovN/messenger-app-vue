{"version":3,"file":"js/662.19cfd7d1.js","mappings":"iMACOA,MAAM,gB,GAGNA,MAAM,c,GACTC,EAAAA,EAAAA,GAAyB,UAArB,oBAAgB,G,GACpBA,EAAAA,EAAAA,GAA4B,SAAzB,yBAAqB,G,GAEfC,IAAI,GAAGC,IAAI,gBAAgBC,IAAI,eAAeJ,MAAM,U,mBAGzCA,MAAM,4B,GAErBA,MAAM,Y,iJAZmBK,EAAAC,UAAO,WAAvCC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,EADJC,EAAAA,EAAAA,IAA2BC,OAAA,gBAE7BT,EAAAA,EAAAA,GAaM,MAbNU,EAaM,CAZJC,EACAC,GACAZ,EAAAA,EAAAA,GAKM,OALDD,MAAM,cAAec,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,MAAMC,MAAMC,U,EACzCnB,EAAAA,EAAAA,GAAkE,MAAlEoB,EAAkE,WAClEpB,EAAAA,EAAAA,GAAoD,SAA7CG,IAAI,QAAQkB,KAAK,OAAQC,SAAMR,EAAA,KAAAA,EAAA,OAAAS,IAAEC,EAAAC,YAAAD,EAAAC,cAAAF,K,UAC9BnB,EAAAsB,MAAY,iBAAR,WAAdpB,EAAAA,EAAAA,IAA0B,IAAAqB,EAAV,WACNvB,EAAAsB,MAA2C,iBAAvC,WAAdpB,EAAAA,EAAAA,IAAqD,IAArDsB,OAEJ5B,EAAAA,EAAAA,GAGM,MAHN6B,EAGM,CAFiBzB,EAAAsB,OAAI,WAAvBI,EAAAA,EAAAA,IAAqEC,EAAA,C,MAA3ClB,QAAOW,EAAAQ,Y,mBAAY,IAAU,UAAV,iB,sCAC7CxB,EAAAA,EAAAA,IAAiDyB,EAAA,CAApCC,GAAG,UAAQ,C,kBAAC,IAAU,UAAV,iB,+CAQjC,GACIC,OACI,MAAO,CACHT,KAAM,GACNrB,SAAS,EAEjB,EACA+B,QAAS,CACLX,WAAWY,GACPC,KAAKjC,SAAU,EACf,MAAMkC,EAAQF,EAAEG,OAAOC,MAAM,GAC7BC,EAAS,IAAIC,WACbC,EAAUN,KAAKrB,MAAM4B,aACrB,GAAGN,EAAMO,KAAO,KAAO,IAGnB,OAFAC,MAAM,8DACNT,KAAKjC,SAAU,GAInBuC,EAAQI,UAAY,GACpBN,EAAOO,UAAY,KACfX,KAAKZ,KAAOgB,EAAOQ,OACnBN,EAAQ3C,IAAMyC,EAAOQ,OACrBZ,KAAKjC,SAAU,CAAI,EAGvBqC,EAAOS,cAAcZ,EACzB,EACAa,mBACI,IAAId,KAAKZ,KAAM,OACfY,KAAKjC,SAAU,EACf,MAAMgD,QAAYf,KAAKgB,OAAOC,SAAS,UACjCC,GAAYrD,EAAAA,EAAAA,IAAIsD,EAAAA,GAAU,eAAcJ,WACxCK,EAAAA,EAAAA,IAAaF,EAAWlB,KAAKZ,KAAM,WAAY,CAACiC,YAAa,eACnErB,KAAKjC,SAAU,QAETiC,KAAKgB,OAAOC,SAAS,gBAE3BjB,KAAKsB,QAAQC,KAAK,SACtB,I,QCvDR,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://chat-app-vue/./src/views/RegisterPhoto.vue","webpack://chat-app-vue/./src/views/RegisterPhoto.vue?961a"],"sourcesContent":["<template>\r\n  <div class=\"auth_handler\" v-if=\"loading\">\r\n    <base-loader></base-loader>\r\n  </div>\r\n  <div class=\"photo_form\">\r\n    <h3>Никнейм - хорошо</h3>\r\n    <p>Но куда без аватарки?</p>\r\n    <div class=\"input_field\" @click=\"$refs.input.click()\">\r\n        <img src=\"\" alt=\"Profile photo\" ref=\"imagePreview\" class=\"hidden\">\r\n        <input ref=\"input\" type=\"file\" @change=\"fileLoaded\">\r\n        <p v-if=\"!file\">700 кб</p>\r\n        <i v-if=\"!file\" class=\"fa-regular fa-file-image\"></i>\r\n    </div>\r\n    <div class=\"form_end\">\r\n        <base-button v-if=\"file\" @click=\"handleForm\">Продолжить</base-button>\r\n        <router-link to=\"/login\">Пропустить</router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { storage } from \"@/firebase/config\"\r\nimport { ref, uploadString } from 'firebase/storage'\r\nexport default {\r\n    data() {\r\n        return {\r\n            file: '',\r\n            loading: false\r\n        }\r\n    },\r\n    methods: {\r\n        fileLoaded(e){\r\n            this.loading = true\r\n            const image = e.target.files[0],\r\n            reader = new FileReader(),\r\n            preview = this.$refs.imagePreview\r\n            if(image.size / 1024 > 700) {\r\n                alert('Извините, мы не принимаем картинки весом более 700 кб')\r\n                this.loading = false\r\n                return\r\n            }\r\n            \r\n            preview.className = ''\r\n            reader.onloadend = () => {\r\n                this.file = reader.result\r\n                preview.src = reader.result\r\n                this.loading = false\r\n            }\r\n            \r\n            reader.readAsDataURL(image)\r\n        },\r\n        async handleForm(){\r\n            if(!this.file) return\r\n            this.loading = true\r\n            const uid = await this.$store.dispatch('getUid'),\r\n                  reference = ref(storage, `usersPhotos/${uid}`)\r\n            await uploadString(reference, this.file, 'data_url', {contentType: \"image/jpeg\"})\r\n            this.loading = false\r\n\r\n            await this.$store.dispatch('setUserPhoto')\r\n            \r\n            this.$router.push('/login')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .photo_form {\r\n        display: flex;\r\n        flex-flow: column nowrap;\r\n        align-items: center;\r\n        width: 100%;\r\n        padding: 20px;\r\n        .input_field {\r\n            cursor: pointer;\r\n            margin-top: 20px;\r\n            border: 3px dashed $grey-color;\r\n            height: 150px;\r\n            width: 150px;\r\n            border-radius: 50%;\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            gap: 20px;\r\n            justify-content: center;\r\n            align-items: center;\r\n            color: $grey-color;\r\n            user-select: none;\r\n            transition: .3s;\r\n            overflow: hidden;\r\n            img {\r\n                max-width: 100%;\r\n                object-fit: cover;\r\n                &.hidden {\r\n                    display: none;\r\n                }\r\n            }\r\n            &:hover {\r\n                border-color: $accent-color;\r\n                color: $accent-color;\r\n            }\r\n            i {\r\n                font-size: 26px;\r\n            }\r\n            input {\r\n                display: none;\r\n            }\r\n        }\r\n        .form_end {\r\n            width: 100%;\r\n            padding-top: 20px;\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            gap: 10px;\r\n            a {\r\n                align-self: flex-end;\r\n            }\r\n            button {\r\n                align-self: flex-start;\r\n             }\r\n        }\r\n    }\r\n    .auth_handler {\r\n        position: fixed;\r\n        z-index: 10;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: rgba($dark-color, .9);\r\n    }\r\n</style>","import { render } from \"./RegisterPhoto.vue?vue&type=template&id=08e37f22\"\nimport script from \"./RegisterPhoto.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterPhoto.vue?vue&type=script&lang=js\"\n\nimport \"./RegisterPhoto.vue?vue&type=style&index=0&id=08e37f22&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\chat\\\\chat-app-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","alt","ref","$data","loading","_createElementBlock","_hoisted_1","_createVNode","_component_base_loader","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","$event","_ctx","$refs","input","click","_hoisted_5","type","onChange","args","$options","fileLoaded","file","_hoisted_6","_hoisted_7","_hoisted_8","_createBlock","_component_base_button","handleForm","_component_router_link","to","data","methods","e","this","image","target","files","reader","FileReader","preview","imagePreview","size","alert","className","onloadend","result","readAsDataURL","async","uid","$store","dispatch","reference","storage","uploadString","contentType","$router","push","__exports__","render"],"sourceRoot":""}