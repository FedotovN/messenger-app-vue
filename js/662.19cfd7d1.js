"use strict";(self["webpackChunkchat_app_vue"]=self["webpackChunkchat_app_vue"]||[]).push([[662],{4662:function(e,i,t){t.r(i),t.d(i,{default:function(){return w}});var a=t(3396);const l={key:0,class:"auth_handler"},s={class:"photo_form"},n=(0,a._)("h3",null,"Никнейм - хорошо",-1),o=(0,a._)("p",null,"Но куда без аватарки?",-1),r={src:"",alt:"Profile photo",ref:"imagePreview",class:"hidden"},d={key:0},u={key:1,class:"fa-regular fa-file-image"},f={class:"form_end"};function h(e,i,t,h,c,g){const p=(0,a.up)("base-loader"),k=(0,a.up)("base-button"),_=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c.loading?((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(p)])):(0,a.kq)("",!0),(0,a._)("div",s,[n,o,(0,a._)("div",{class:"input_field",onClick:i[1]||(i[1]=i=>e.$refs.input.click())},[(0,a._)("img",r,null,512),(0,a._)("input",{ref:"input",type:"file",onChange:i[0]||(i[0]=(...e)=>g.fileLoaded&&g.fileLoaded(...e))},null,544),c.file?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",d,"700 кб")),c.file?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("i",u))]),(0,a._)("div",f,[c.file?((0,a.wg)(),(0,a.j4)(k,{key:0,onClick:g.handleForm},{default:(0,a.w5)((()=>[(0,a.Uk)("Продолжить")])),_:1},8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(_,{to:"/login"},{default:(0,a.w5)((()=>[(0,a.Uk)("Пропустить")])),_:1})])])],64)}t(7658);var c=t(7732),g=t(1294),p={data(){return{file:"",loading:!1}},methods:{fileLoaded(e){this.loading=!0;const i=e.target.files[0],t=new FileReader,a=this.$refs.imagePreview;if(i.size/1024>700)return alert("Извините, мы не принимаем картинки весом более 700 кб"),void(this.loading=!1);a.className="",t.onloadend=()=>{this.file=t.result,a.src=t.result,this.loading=!1},t.readAsDataURL(i)},async handleForm(){if(!this.file)return;this.loading=!0;const e=await this.$store.dispatch("getUid"),i=(0,g.iH)(c.tO,`usersPhotos/${e}`);await(0,g.sf)(i,this.file,"data_url",{contentType:"image/jpeg"}),this.loading=!1,await this.$store.dispatch("setUserPhoto"),this.$router.push("/login")}}},k=t(89);const _=(0,k.Z)(p,[["render",h]]);var w=_}}]);
//# sourceMappingURL=662.19cfd7d1.js.map